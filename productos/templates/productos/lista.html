<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Tienda de Electr√≥nica</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'productos/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/footer.css' %}">
    
    
</head>
<body>
    

<header>
    <div class="topbar">
        <div class="brand">
            <div class="badge">üíª</div>
            <div>ElecTRON</div>
        </div>
        <button id="themeToggle">‚òÄÔ∏è / üåô</button>
        <div class="spacer"></div>
        <button id="btnCart" class="pill eco">üõí Carrito <span id="cartCount" class="cart-count">0</span></button>
    </div>

    <form class="toolbar" method="get" action=".">
        <button type="submit" class="btn eco">Buscar</button>
        <div class="control">
            <input type="search" name="q" id="q" placeholder="Buscar (modelo, etiqueta, uso)" value="{{ request.GET.q }}">
        </div>
        <div class="control">
            <select name="type" id="type">
                <option value="">Categor√≠a</option>
                <option value="Computadora" {% if request.GET.type == "Computadora" %}selected{% endif %}>Computadora</option>
                <option value="Smartphone" {% if request.GET.type == "Smartphone" %}selected{% endif %}>Smartphone</option>
                <option value="Audifonos" {% if request.GET.type == "Audifonos" %}selected{% endif %}>Aud√≠fonos</option>
                <option value="TV" {% if request.GET.type == "TV" %}selected{% endif %}>TV</option>
                <option value="Consola" {% if request.GET.type == "Consola" %}selected{% endif %}>Consola</option>
                <option value="Accesorio" {% if request.GET.type == "Accesorio" %}selected{% endif %}>Accesorio</option>
                <option value="Microcontrolador" {% if request.GET.type == "Microcontrolador" %}selected{% endif %}>Microcontrolador</option>
            </select>

            <select name="brand" id="brand">
                <option value="">Marca</option>
                <option value="Apple" {% if request.GET.brand == "Apple" %}selected{% endif %}>Apple</option>
                <option value="Samsung" {% if request.GET.brand == "Samsung" %}selected{% endif %}>Samsung</option>
                <option value="Sony" {% if request.GET.brand == "Sony" %}selected{% endif %}>Sony</option>
                <option value="Logitech" {% if request.GET.brand == "Logitech" %}selected{% endif %}>Logitech</option>
                <option value="Xiaomi" {% if request.GET.brand == "Xiaomi" %}selected{% endif %}>Xiaomi</option>
                <option value="Arduino" {% if request.GET.brand == "Arduino" %}selected{% endif %}>Arduino</option>
            </select>
        </div>

        <div class="control">
            <input type="number" name="min" id="min" placeholder="Precio m√≠n (GTQ)" value="{{ request.GET.min }}">
            <input type="number" name="max" id="max" placeholder="Precio m√°x (GTQ)" value="{{ request.GET.max }}">
        </div>

        <div class="control">
            <select name="sort" id="sort">
                <option value="pop" {% if request.GET.sort == "pop" %}selected{% endif %}>Ordenar: Popularidad</option>
                <option value="priceAsc" {% if request.GET.sort == "priceAsc" %}selected{% endif %}>Precio ‚Üë</option>
                <option value="priceDesc" {% if request.GET.sort == "priceDesc" %}selected{% endif %}>Precio ‚Üì</option>
                <option value="rating" {% if request.GET.sort == "rating" %}selected{% endif %}>Mejor valoraci√≥n</option>
            </select>

            <div class="checks">
                <label class="small">
                    <input type="checkbox" name="nuevo" id="nuevo" {% if request.GET.nuevo %}checked{% endif %}> Nuevos
                </label>
                <label class="small">
                    <input type="checkbox" name="usado" id="usado" {% if request.GET.usado %}checked{% endif %}> Usados
                </label>
            </div>
        </div>

        <div class="control">
            <button type="submit" class="btn eco">Filtrar</button>
            <button type="button" id="limpiarF" class="pill">Eliminar filtrado</button>
        </div>
    </form>
<nav class="subnav">
  <div class="subnav-inner">
    <a href="#" class="chip">Ofertas</a>
    <a href="#" class="chip">Marcas</a>
    <a href="#" class="chip">Marketplace</a>
    <a href="#" class="chip">Tiendas</a>
    <a href="#" class="chip">Puntos</a>
    <a href="#" class="chip">Servicios</a>
    <a href="#" class="chip">Rastrear pedido</a>
  </div>
</nav>

</header>
<div class="carousel">
    <div class="carousel-track">
        {% for img in carousel_images %}
        <div class="carousel-slide {% if forloop.first %}active{% endif %}">
            {% if img.enlace %}
                <a href="{{ img.enlace }}">
                    <img src="{{ img.imagen.url }}" alt="{{ img.titulo }}">
                </a>
            {% else %}
                <img src="{{ img.imagen.url }}" alt="{{ img.titulo }}">
            {% endif %}
        </div>
        {% endfor %}
    </div>
    <button class="carousel-button prev">‚Äπ</button>
    <button class="carousel-button next">‚Ä∫</button>
</div>

<section class="promo-strip">
  <a href="#" class="promo-pill">
    <div class="promo-pill__label">
      <strong>iPhone 17 PRO</strong> PREVENTA
    </div>
    <span class="promo-pill__cta">Ver aqu√≠</span>
  </a>

  <a href="#" class="promo-pill soft">
    <div class="promo-pill__label">
      <strong>DESCUBRE LO NUEVO</strong> ‚Äì Hogar ‚Ä¢ Deportes ‚Ä¢ Beb√©s
    </div>
    <span class="promo-pill__cta">Ver m√°s</span>
  </a>
</section>

<section class="promo-grid" aria-label="Promociones destacadas">

  <article class="promo-card">
    <div class="promo-bg house"></div>
    <div class="promo-content">
      <div>
        <span class="promo-badge"><strong>20%</strong> DCTO</span>
        <h3 class="promo-title">Lo mejor para tu hogar con hasta</h3>
      </div>
      <button class="promo-btn" data-scroll="#grid">Ver productos</button>
    </div>
  </article>


  <article class="promo-card">
    <div class="promo-bg tennis"></div>
    <div class="promo-content">
      <div>
        <span class="promo-badge"><strong>15%</strong> DCTO</span>
        <h3 class="promo-title">Potencia tu juego</h3>
      </div>
      <button class="promo-btn" data-scroll="#grid">Ver ofertas</button>
    </div>
  </article>


  <article class="promo-card">
    <div class="promo-bg starlink"></div>
    <div class="promo-content promo-light">
      <div>
        <span class="promo-badge ghost">STARLINK</span>
        <h3 class="promo-title">Internet r√°pido, en cualquier lugar</h3>
      </div>
      <button class="promo-btn" data-scroll="#grid">Ver ofertas</button>
    </div>
  </article>


  <article class="promo-card">
    <div class="promo-bg scooter"></div>
    <div class="promo-content">
      <div>
        <span class="promo-badge"><strong>15%</strong> DCTO</span>
        <h3 class="promo-title">¬°De todo para horas de diversi√≥n!</h3>
      </div>
      <button class="promo-btn" data-scroll="#grid">Ver ofertas</button>
    </div>
  </article>


  <article class="promo-card">
    <div class="promo-bg baby"></div>
    <div class="promo-content">
      <div>
        <span class="promo-badge"><strong>15%</strong> DCTO</span>
        <h3 class="promo-title">Elige seguridad y confort para tu beb√©</h3>
      </div>
      <button class="promo-btn" data-scroll="#grid">Ver ofertas</button>
    </div>
  </article>


  <article class="promo-card">
    <div class="promo-bg kitchen"></div>
    <div class="promo-content">
      <div>
        <span class="promo-badge ghost">NUEVO</span>
        <h3 class="promo-title">Equipa tu cocina con lo nuevo</h3>
      </div>
      <button class="promo-btn" data-scroll="#grid">Ver productos</button>
    </div>
  </article>
</section>
<!-- OFERTAS DESTACADAS -->
<section class="featured">
  <div class="featured__head">
    <h2 class="featured__title">‚ö° Ofertas destacadas</h2>
    <a href="{% url request.resolver_match.view_name %}" class="featured__all">Ver todos</a>
  </div>

  <div class="featured__rail">
    <button class="rail-btn prev" aria-label="Anterior">‚Äπ</button>

    <div class="rail" id="rail-ofertas">
      {% for p in productos|slice:":12" %}
      <article class="mini-card">
        <a class="mini-card__img" href="#">
          <img src="{{ p.imagen.url }}" alt="{{ p.nombre }}">
          {% if p.precio_original %}
            <span class="mini-card__badge">
              -{% widthratio p.precio_original|floatformat:0|add:"-`"|cut:"`"|add:p.precio|floatformat:0  p.precio_original 100 as pct %}
              {% comment %}
              widthratio solo acepta enteros; haremos el % en JS si quieres exactitud.
              {% endcomment %}
            </span>
          {% endif %}
        </a>
        <div class="mini-card__body">
          <div class="mini-card__brand">
            Marca:
            <a href="?brand={{ p.marca|urlencode }}"> {{ p.marca }} </a>
          </div>
          <a class="mini-card__name" href="#">{{ p.nombre|truncatechars:40 }}</a>
          <div class="mini-card__price">
            <strong>Q{{ p.precio }}</strong>
            {% if p.precio_original %}
              <span class="str">Q{{ p.precio_original }}</span>
            {% endif %}
          </div>
        </div>
      </article>
      {% endfor %}
    </div>

    <button class="rail-btn next" aria-label="Siguiente">‚Ä∫</button>
  </div>
</section>

<main>
    <div id="grid" class="grid">
        {% for p in productos %}
        <div class="card">
            <img class="thumb" src="{{ p.imagen.url }}" alt="{{ p.nombre }}">
            <div class="info">
                <div class="name">{{ p.nombre }}</div>
                <div class="desc">{{ p.descripcion }}</div>
                <div class="tag">{{ p.categoria }}</div>
                <div class="tag">{{ p.marca }}</div>
                <div class="tag">{{ p.estado|title }}</div>
                <div class="tags">
                    {% if p.tipo %}<span class="tag">{{ p.tipo }}</span>{% endif %}
                    {% if p.gama_alta %}<span class="tag">Gama Alta</span>{% endif %}
                    {% if p.portatil %}<span class="tag">Port√°til</span>{% endif %}
                    {% for t in p.tags %}{% if t %}<span class="tag">{{ t }}</span>{% endif %}{% endfor %}
                </div>
                <div class="row">
                    <div class="stars" title="{{ p.valoracion|floatformat:1 }} / 5">
                        {% for i in "12345" %}
                            {% if forloop.counter <= p.valoracion|floatformat:0 %}‚òÖ{% else %}‚òÜ{% endif %}
                        {% endfor %}
                    </div>
                    <div>
                        <span class="price">Q{{ p.precio }}</span>
                        {% if p.precio_original %}<span class="str">Q{{ p.precio_original }}</span>{% endif %}
                    </div>
                </div>
                <div class="actions">
                    <button class="btn eco" data-add="{{ p.id }}">A√±adir al carrito</button>
                </div>
            </div>
        </div>
        {% empty %}
        <p style="grid-column:1/-1; text-align:center">No hay productos.</p>
        {% endfor %}
    </div>
</main>
<aside id="drawer" class="drawer" aria-hidden="true">
</aside>
<div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-hidden="true">
</div>
<footer class="footer">
  <div class="footer-container">
    <div class="footer-section">
      <h2 class="footer-logo">ElecTRON</h2>
      <p>Lo mejor en productos electr√≥nicos, componentes y tecnolog√≠a de punta.</p>
    </div>
    <div class="footer-section">
      <h3>Enlaces r√°pidos</h3>
      <ul>
        <li><a href="#">Inicio</a></li>
        <li><a href="#">Tienda</a></li>
        <li><a href="#">Ofertas</a></li>
        <li><a href="#">Contacto</a></li>
      </ul>
    </div>
    <div class="footer-section">
      <h3>Categor√≠as</h3>
      <ul>
        <li><a href="#">Componentes</a></li>
        <li><a href="#">Accesorios</a></li>
        <li><a href="#">Computadoras</a></li>
        <li><a href="#">Audio y Video</a></li>
      </ul>
    </div>
    <div class="footer-section">
      <h3>Cont√°ctanos</h3>
      <ul>
        <li>üìç Puerto Barrios, Izabal</li>
        <li>üìû +502 5986-1872</li>
        <li>‚úâÔ∏è contacto@electron.com</li>
      </ul>
      <div class="footer-social">
        <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="#" aria-label="X Twitter"><i class="fab fa-x-twitter"></i></a>
      </div>
    </div>
  <div class="footer-bottom">
    &copy; 2025 ElecTRON. Todos los derechos reservados.
  </div>
</footer>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'productos/app.js' %}?v=1.2"></script>
</body>
</html>